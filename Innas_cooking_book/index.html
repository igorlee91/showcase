<!DOCTYPE html>
<html lang="en nl ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inna's cooking recipes</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courgette&family=Francois+One&family=Open+Sans+Condensed:wght@300;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Piedra&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@200;400&family=Piedra&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Supermercado+One&display=swap" rel="stylesheet">

    <style>
        /*********
        TYPOGRAPHIE
        **********/
        .button-section button{
            font-family: 'Roboto', sans-serif;
        }
        .article_buttons{
            font-family: 'Alfa Slab One', cursive;
        }
        .art-label, .banner h1{
            font-family: 'Courgette', cursive; 
        }
        .art-input input{
            font-family: 'Lobster', cursive;
            text-transform: capitalize;
        }
        .art-input textarea{
            font-family: 'Josefin Sans', sans-serif;
        }
        .art-input textarea::placeholder{
            font-family: 'Courgette', cursive;
        }
        .recently-added-title{
            font-family: 'Abril Fatface', cursive;
        } 
        .article-title{
            font-family: 'Abril Fatface', cursive;
        }
        .article-title p {
            font-family: 'Supermercado One', cursive;
            font-weight: 200;
            font-size: 0.9rem;
        }
        /*********
        STRUCTURE & LAYOUT
        **********/
        body{
            width: 90%;
            max-width: 960px;
            margin: auto;
        }
        .banner h1{
            margin: .5rem;
        }
        .body-container{
            width: 90%;
            max-width: 900px;
            margin: auto;
        }
        .flex-button-form{
            display: flex;
            margin-top: 1rem;
        }
        .flex-button-form>* {
            margin: .25rem;
        }
        .article_recipe{
            margin: .25rem;
            margin-top: 1rem;
        }
        .button-section{
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 15%;
            min-height: 50px;
            max-width: 120px;
        }
        .addbutton button, .removebutton button, .submitbutton button{
            min-height: 50px;
            border-radius: 25%;
            font-family: 'Ubuntu', sans-serif;
            text-decoration: none;
            background-image: url(https://p7.hiclipart.com/preview/146/292/1009/button-download-computer-file-red-button.jpg);
            background-size: cover;
        }
        
        .button-section button:focus{
            outline: 0;
        }
        .form-appear{ 
            width: 65%;
            display: flex;
            justify-content: space-around;
        }
        .art-label{
            display: flex;
            flex-direction: column;
            min-width: 55px;
            justify-content: flex-start;
            display: grid;
        }
        .art-label label{
            margin: .3rem;
        }
        .art-input{
            display: flex;
            flex-direction: column;
            margin-bottom: .5rem;
            align-items: flex-start;
        }
        .art-input input{
            min-width: 300px;
            margin: .3rem;
        }
        .art-input textarea{
            margin-left: .275rem;
            min-width: 300px;
            min-height: 150px;
        }
        .recently-added>*{
            margin: 0rem
        }
        .recently-added{
            width: 20%;
            display: flex;
            flex-direction: column;    
        }
        .recently-added-title{
            text-align: center;
            margin: .2rem;
            margin-bottom: 0;
            border: 4px solid rgba(230, 219, 230, 0.6); 
            border-bottom: 0;
        }  
        .recently-added-ul{  
            display: flex;
            flex-direction: column-reverse;
            text-align: center;
            margin-right: .2rem;
            margin-left: .2rem;
            margin-bottom: .2rem;
            border: 4px solid rgba(230, 219, 230, 0.6);
            padding: 0;
        }
        .recently-added-ul li{
            list-style-type: none;
            margin: .25rem;
        }
        .flex-container-articles{
            display: flex;
            flex-direction: column-reverse;
        }
        .article-title h2{
            text-align: center;
            margin: 0.17rem;
        }
        .article-title p {
   
            margin: .17rem;
            padding: 0.7rem;
        }
        #article_button_div-id{
            text-align: center;
            margin: .52rem;
        }
        .editwindow{
            display: grid;
        }
        .editwindow>*{
            border: 1xp solid;
        }
        #editwindow_textarea-id{
            min-height: 350px;
        }

        footer p{
            text-align: center;
        }
        /*********
        BACKGROUND COLORS AND IMAGES
        **********/
        .wrapper{
            background-image: url(https://media.istockphoto.com/photos/blurred-abstract-background-modern-kitchen-with-tabletop-and-space-picture-id935971392?k=6&m=935971392&s=612x612&w=0&h=BBpvZGyA1OU4kna2PhEKYAH86CpL127cHYkSpA-nE54=);
            background-size: cover;
            
        }
        .banner{
            display: flex;
            justify-content: flex-start;
            align-items: flex-end;
            background: url(http://sanitarlifestyle.com/wp-content/uploads/2019/03/kitchen-banner.jpg) no-repeat center;
            background-size: cover;
            height: 175px;
            color: rgba(243, 191, 243, 0.885);
        }
        body{
            background-image: url(http://sanitarlifestyle.com/wp-content/uploads/2019/03/kitchen-banner.jpg) no-repeat;
            background-size: cover;
        }
        .form-appear{
            background: rgba(233, 224, 233, 0.7);
        }
        .art-input textarea::placeholder{
            color: rgba(216, 173, 216, 0.3);
        }
        .recently-added{
            background:rgba(41, 36, 36, 0.7);
        }
        .recently-added-title{
            color: rgba(215, 222, 243, 0.8);
        }
        .recently-added-ul li{
            background: rgba(165, 169, 180, 0.8);
        }
        .recently-added-ul li:hover{
            background: rgba(107, 137, 228, 0.3);
        }
        .recently-added-ul a{
            font-family: 'Piedra', cursive;
            text-decoration: none;
            color: #e2d1fc;
        }
        .recently-added-ul li a:hover{
            color: rgba(197, 203, 219, 0.8);
            text-decoration: underline;
        }
        .addbutton button, .removebutton button, .submitbutton button{
            color: rgba(255, 255, 250);   
        }
        .addbutton button:hover,  .removebutton button:hover, .submitbutton button:hover{
            color: rgb(219, 219, 208);
        }
        .submitbutton button{     
            text-decoration: underline;
        }
        .article_recipe{
            background-image: linear-gradient(to bottom, rgba(208, 221, 179, 0.5), ivory);
        }
        .article-title h2{
            color:#22123b;
        }
        .article_buttons{
            background-image: linear-gradient(to right, rgba(209, 68, 111, 0.5), rgba(175, 146, 146, 0.8));
            color: white;
        }
        .article-title p{
            color: rgb(19, 24, 17);
        }
        footer{
            background: url( http://sanitarlifestyle.com/wp-content/uploads/2019/03/kitchen-banner.jpg) no-repeat center;
            background-size: cover;
            color: #f9f9f9;
        }
        
        /*********
        RESPONSIVENESS
        **********/
        @media (max-width: 1100px){
            .flex-button-form{
                flex-direction: column;
            }
            .flex-button-form>* ,.article_recipe{
                width: 95%;
            }
            .form-appear{
                background: rgba(233, 224, 233, 0.4);
                margin-bottom: .5rem;
            }
            .art-input input,.art-input textarea{
            min-width: 500px;
            }
            .button-section{
                flex-direction: row;
                min-width: 95%;
                background-image: linear-gradient(to bottom, rgb(243, 240, 233,.3),rgba(163, 158, 158, 0.45),rgba(243, 234, 233, 0.3));
                border-style: hidden;
                border-radius: 1.8rem
            }
            
            body{
                /*background: orange;*/
            }
        }
        @media (max-width: 742px){
            .form-appear{
                justify-content: space-around
            }  
            .art-input input{
            min-width: 156.5px;
            width: 95%;
            }
            .art-input textarea{
                margin-left: .275rem;
                min-width: 155px;
                min-height: 150px;
                width: 95%;
            }
            .art-label{
                width: 15%;
            }
            .art-input{
                width: 65%;
            }
            .button-section >*{
                min-width: 100px;
            }
            .removebutton{
                margin-right: -.95rem;
            }
        }
    </style>
</head>
<body>

    <div class="wrapper">
        <!--Start Header-->
        <header>
            <div class="banner">
                <h1>Inna's cooking book </h1>
            </div> 
        </header>
        <!--End of Header-->
        <!--Start Body-Container-->
        <div class="body-container">
            <div class="flex-button-form">
                    <div class="button-section">
                        <div class="addbutton">
                            <button id="add-new" href="#">Add new recipe</button>
                        </div>
                        
                        <div class="removebutton">
                            <button id="removebutton-id">Remove All</button>
                        </div>
                        
                    </div>       
                    <div class="form-appear" id="form-appear-id">

                            <div class="art-label">
                                <label for="name-recipe" id=label-recipe-id>Name:</label>
                                <label for="info-recipe" id=recipe-info-id>Info:</label>
                                <div class="uploadfile">
                                    <label for="img">Select image:</label>
                                    <input type="file" id="img" name="img" accept="image/*">
                                    <input type="submit">
                                </div>
                                <div class="submitbutton">
                                    <button id="submitbutton-id">Submit</button>
                                </div> 
                            </div>
                            <div class="art-input">
                                <input id="input-recipe-id" name="recipe-id" type="text" autofocus>
                                <textarea placeholder="place your details here" id="textarea-id" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'></textarea>
                            </div>
                            
                            
                            
                    </div>
                    <aside class="recently-added">
                        <div class="recently-added-title">
                            <h3>Recently Added</h3>     
                        </div>           
                        <ul class="recently-added-ul" id="recently_added_ul-id"></ul>    
                    </aside>
            </div>
            <!--End Flex-button-form-->
            <main id="main-id">
                <div class="flex-container-articles" id="flex_container_articles-id">

                </div>
            </main>   
        </div>
        <!--<button id="randombutton">add random</button>-->
        
        <!--End Body-Container-->
        <!--Start Footer-->
            <footer>
                <p>Copyright 2020 &copy;</p>
            </footer>
        <!--End Footer-->
        
    </div>
    <!--End Wrapper-->    

        
        
    
</body>
<script>
window.onload=function(){
    
    for(let x=0; x<localStorage.length; x++)
        {
            if(localStorage.key(x).includes("recipes"))
            {   
                {
                /*________Var creation_____________________________________________*/
                let article_recipe = document.createElement('div');
                let article_recipe_title = document.createElement('h2');
                let article_recipe_p = document.createElement('p');
                    //(buttons)
                    let article_recipe_removebutton = document.createElement('button');
                    let article_recipe_editbutton = document.createElement('button');
                        article_recipe_removebutton.innerText = "Remove this article";
                        article_recipe_editbutton.innerText = "Edit";
                        article_recipe_removebutton.className = "article_buttons";
                        article_recipe_editbutton.className = "article_buttons";
                        article_recipe_editbutton.classList.add("article_buttons_edit");
                    //(end buttons)
                let recently_added_a = document.createElement('a');
                let recently_added_li = document.createElement('li');
                let article_button_div = document.createElement( 'div');

                    /*________Characteristics_____________________________________________*/
                    article_recipe_title.id="article_title-id";
                    article_recipe.classList="article-title";
                    if(
                        localStorage.key(x).includes("recipes")
                    ){
                        article_recipe_title.innerText = JSON.parse(  localStorage.getItem(localStorage.key(x))   )[0];
                        article_recipe_p.innerText = JSON.parse( localStorage.getItem( localStorage.key(x)  )   )[1];
                        
                    }
                    article_recipe.style.order = x;
                    article_recipe.classList.add('article_recipe');
                    article_recipe_p.id = "article_p-id";
                    article_button_div.id = "article_button_div-id";
                
                //(event-listeners)
                article_recipe_removebutton.addEventListener("click",function(){
                    localStorage.removeItem(localStorage.key(x));
                    history.go(0);
                
                })
                
                
                //generation textarea for editing
                article_recipe_editbutton.addEventListener("click", function(){
                    //______var naming_________________________________________/
                    let editwindow_textarea = document.createElement('textarea');
                    let editwindowdiv = document.createElement('div');
                    let editwindow_submitbutton = document.createElement('button');
                    //______var characteristics_________________________________________/
                    editwindowdiv.classList.add('editwindow');
                    editwindowdiv.style.display = "visible";

                    editwindow_textarea.id = "editwindow_textarea-id";
                    editwindow_textarea.value = this.parentNode.parentNode.children[1].innerText;
        
                    editwindow_submitbutton.innerText = "Ok";
                    editwindow_submitbutton.addEventListener("click",function(){
                        this.parentNode.parentNode.children[1].innerText = this.parentNode.children[0].value;
                        localStorage.setItem(
                        (JSON.stringify(['recipes',this.parentNode.parentNode.children[0].innerText+"_edited_"]))
                        ,
                        (JSON.stringify([this.parentNode.parentNode.children[0].innerText,this.parentNode.parentNode.children[1].innerText]))          
                        )
                        
                        //if edited, remove last version form storage
                        for(let x=0; x<localStorage.length; x++)
                        {
                            if(localStorage.key(x).includes("recipes"))
                            { 
                                if(
                                    this.parentNode.parentNode.children[0].innerText===
                                    JSON.parse(
                                    localStorage.getItem(localStorage.key(x))
                                    )[0]
                                )
                                    {
                                        if(
                                            JSON.parse(
                                            localStorage.getItem(localStorage.key(x))
                                            )[1]
                                            !==this.parentNode.parentNode.children[1].innerText
                                        ){
                                            localStorage.removeItem(localStorage.key(x));
                                        }
                                        
                                    }
                            }
                                
                        }
                        
                            this.parentNode.parentNode.children[3].remove();
                    })
                    
                    //______var appending_________________________________________/
                    editwindowdiv.append(editwindow_textarea);
                    editwindowdiv.append(editwindow_submitbutton);
                    this.parentNode.parentNode.append(editwindowdiv);
                    
                        
                })
                //end text generation

                recently_added_a.href="#artcile_title-id";
                recently_added_a.style.order = x;
                recently_added_li.innerText=JSON.parse( localStorage.getItem( localStorage.key(x))  )[0];
                /*________Appending_____________________________________________*/
                article_recipe.append(article_recipe_title);
                article_recipe.append(article_recipe_p);
                article_button_div.append(article_recipe_editbutton);
                article_button_div.append(article_recipe_removebutton);
                
                article_recipe.append(article_button_div);
                document.getElementById('flex_container_articles-id').append(article_recipe);
                recently_added_a.append(recently_added_li);
                document.getElementById('recently_added_ul-id').append(recently_added_a);
                
                }
            } 
        }
    
    if(document.getElementsByClassName('recently-added-ul')[0].children.length > 0){
        document.getElementsByClassName('recently-added-ul')[0].parentNode.style.visibility = "visible";
    }
    else{
        document.getElementsByClassName('recently-added-ul')[0].parentNode.style.visibility = "hidden";
    }
    document.getElementById('add-new').addEventListener("click",showsform);
    document.getElementById('submitbutton-id').addEventListener("click",add2local);
    document.getElementById('removebutton-id').addEventListener("click",clearls);
    
    }
    //End window.onload
    /*******************
    Functions
    *******************/
    function showsform(){
        if(document.getElementById('form-appear-id').style.visibility === "hidden"){
            document.getElementById('form-appear-id').style.visibility = "visible";
            document.getElementById('textarea-id').onclick = function(){
                this.placeholder=" "
            }
            document.getElementById('add-new').innerText = "Hide form";
            document.getElementsByClassName('form-appear')[0].style.height = "initial";
        }
        else{
            document.getElementsByClassName("form-appear")[0].style.visibility = "hidden";
            document.getElementById('add-new').style.color = "ivory";
            document.getElementById('add-new').innerText = "Add new recipe";
            history.go(0);
        }    
    }

    function clearls(){
        localStorage.clear();
        history.go(0);
    }

    function add2local(){
        let name_incoming = document.getElementById('input-recipe-id').value;
        let info_incoming = document.getElementById('textarea-id').value;

        localStorage.setItem(
            (JSON.stringify(['recipes',name_incoming+"_init"]))
            ,
            (JSON.stringify([name_incoming,info_incoming]))          
            )
            
        

        
        
        history.go(0);
    }
    document.getElementById('form-appear-id').style.visibility = "hidden";
    if(document.getElementById('add-new').innerText = "Add new recipe"){
        document.getElementsByClassName('form-appear')[0].style.height = "2px";
    }
</script>


</html>